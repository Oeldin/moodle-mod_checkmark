{"version":3,"sources":["../src/quickgrade.js"],"names":["define","$","str","State","name","state","Quickgrade","prototype","toogleOverwiteHint","element","hasClass","removeClass","addClass","calculateSum","line","sum","each","is","classname","attr","classes","split","forEach","value","startsWith","parseFloat","substring","setPoints","points","val","get_strings","key","component","then","results","text","resetFeedback","init","originalState","push","getAttribute","style","display","quickgrade","document","ready","change","event","target","attributes","nodeValue","parentElement","lastChild"],"mappings":"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","sourcesContent":["define(['jquery', 'core/str'], function ($, str) {\n\n    var State = function (name,state) {\n        this.name = name;\n        this.state = state;\n    };\n\n    var Quickgrade = function () {\n    };\n\n    Quickgrade.prototype.toogleOverwiteHint = function (element) {\n        if($(element).hasClass('exborder')) {\n            $(element).removeClass('exborder');\n        } else {\n            $(element).addClass('exborder');\n        }\n\n    };\n\n    Quickgrade.prototype.calculateSum = function (line) {\n        var sum = 0;\n        $('input.checkline' + line).each(function () {\n            if($(this).is(':checked')) {\n                var classname = $(this).attr('class');\n                var classes = classname.split(' ');\n                classes.forEach(function (value) {\n                    if (value.startsWith(\"$\")) {\n                        sum += parseFloat(value.substring(1));\n                    }\n                });\n            }\n        });\n        return sum;\n    };\n    Quickgrade.prototype.setPoints = function (line,points) {\n        $('#menumenu' + line).val(points);\n\n        var strings = [\n            {\n                key: 'strautograded',\n                component: 'checkmark'\n            },\n        ];\n        str.get_strings(strings).then(function (results) {\n            $('#feedback' + line).text(results[0]);\n        });\n\n    };\n\n    Quickgrade.prototype.resetFeedback = function () {\n        $('#id_feedback_editoreditable:first-child').text('');\n    };\n    return {\n        init: function () {\n            var originalState = [];\n            $('.overwritetag').each(function() {\n                originalState.push(new State(this.getAttribute('class'),this.style.display !== 'none'));\n            });\n            var quickgrade = new Quickgrade(originalState);\n            quickgrade.originalState = originalState;\n            $(document).ready(function () {\n                $('input.examplecheck').change(function (event) {\n                    var line = event.target.attributes['value'].nodeValue;\n                    quickgrade.setPoints(line,quickgrade.calculateSum(line));\n                    quickgrade.toogleOverwiteHint(event.target.parentElement.lastChild);\n                });\n                /*\n                $('#id_xgrade').change(grading.resetFeedback);\n                $('#id_resetbutton').click(grading.resetOverwrite);\n                */\n            });\n\n        }\n    };\n});"],"file":"quickgrade.min.js"}