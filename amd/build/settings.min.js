define(["jquery","core/log"],function(a,b){var c=function(){this.dividing_symbol=","};c.prototype.update_settings=function(b){var c=0,d=0;b.data.stripper(b);var e="#id_modgrade_type",f="#id_modgrade_point",g="#id_flexiblenaming",h="#id_examplegrades",i="#id_examplenames",j="#id_examplecount";if("point"!=a(e).val())return!0;if(a(g).prop("checked")){var k=new RegExp(b.data.dividing_symbol+"{2,}","g");if(a(h).val(a(h).val().replace(k,b.data.dividing_symbol)),"valuechange"!=b.type){var l=new RegExp("^"+b.data.dividing_symbol+"*|"+b.data.dividing_symbol+"*$","g");a(h).val(a(h).val().replace(l,"")),a(i).val(a(i).val().replace(l,""))}var m=new RegExp("[^0-9"+b.data.dividing_symbol+"]"),n=a(h).val().replace(m,""),o=n.split(b.data.dividing_symbol);for(d=0;d<o.length;d++)""!==o[d].replace(/[^\d]/g,"")&&(c+=parseInt(o[d].replace(/[^\d]/g,"")))}else c=a(j).val();return!a(g).prop("checked")&&a(f).val()%c===0||(c<=100&&c>0?(a(e).val("point"),a(f).val(c)):c<0&&a(e).val("scale"),!0)},c.prototype.stripper=function(b){if(null!==b&&b.which<=46)return!0;var c="#examplegrades";a(c).length||(c="#id_examplegrades");var d=new RegExp("[^0-9"+b.data.dividing_symbol+"]","g");return a(c).val(a(c).val().replace(d,"")),!0};var d=new c;return d.initializer=function(c){this.dividing_symbol=c.dividing_symbol,b.info("Initialize settings JS","checkmark");var d="#id_modgrade_type",e="#id_flexiblenaming",f="#id_examplegrades",g="#id_examplenames",h="#id_examplecount";a(e).click(this,this.update_settings),a(d).change(this,this.update_settings),a(f).change(this,this.update_settings),a(g).change(this,this.update_settings),a(h).change(this,this.update_settings),a(f).blur(this,this.update_settings),a(g).blur(this,this.update_settings),a(h).blur(this,this.update_settings),a(f).keyup(this,this.stripper),"no"===a("input[name=allready_submit]").val()&&this.update_settings({data:this})},d});