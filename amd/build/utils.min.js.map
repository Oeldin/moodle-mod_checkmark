{"version":3,"sources":["../src/utils.js"],"names":["define","$","str","Utils","baseurl","M","cfg","wwwroot","prototype","toggleExamples","show","getForAllExamples","key","allexamples","getExampleSelectors","ajax","url","data","hide","columns","statusCode","window","location","href","replace","each","classes","attr","classes_arr","split","forEach","value","startsWith","push","allExamplesCollapsed","length","getBaseUrl","clearPointerEventsFromIcons","css","init","utils","showallContainer","after","hideallContainer","prepend","get_strings","component","then","results","prop","text","document","ready","click"],"mappings":"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","sourcesContent":["define(['jquery', 'core/str'], function ($, str) {\n\n    var Utils = function () {\n        this.baseurl = M.cfg.wwwroot + \"/mod/checkmark/handlehideall.php\";\n    };\n    var baseurl;\n\n    Utils.prototype.toggleExamples = function (show) {\n        if (show) {\n            this.getForAllExamples('false');\n        } else {\n            this.getForAllExamples('true');\n        }\n    };\n\n    Utils.prototype.getForAllExamples = function (key) {\n        var allexamples = this.getExampleSelectors();\n        $.ajax({\n            url: baseurl,\n            data: {\n                hide: key,\n                columns: allexamples\n            },\n            statusCode: {\n                200: function () {\n                    var url = window.location.href;\n                    url = url.replace(/thide=[a-z0-9]+/, '') /* Removes thide=....3242 !*/\n                             .replace(/tshow=[a-z0-9]+/, '') /* Removes tshow=....3432 ! */\n                             .replace(/\\?&/, '?') /* Removes accidentally left ?&.. */\n                             .replace(/&&/, '&') /* Removes accidentally left &&.. */\n                             .replace(/&$/, ''); /* Removes trailing &.. */\n                    window.location.replace(url);\n                }\n            }\n        });\n    };\n\n    Utils.prototype.getExampleSelectors = function () {\n        var allexamples = [];\n\n        $(\"th.colexample\").each(function () {\n\n            var classes = $(this).attr(\"class\");\n            var classes_arr = classes.split(\" \");\n            classes_arr.forEach(function (value) {\n                if (value.startsWith(\"example\")) {\n                    allexamples.push(value);\n                }\n            });\n        });\n        return allexamples;\n    };\n    Utils.prototype.allExamplesCollapsed = function () {\n        return $('th.colexample > .commands').length === 0;\n    };\n    Utils.prototype.getBaseUrl = function () {\n        return this.baseurl;\n    };\n    Utils.prototype.clearPointerEventsFromIcons = function () {\n        $('.fa-minus,.fa-plus').css('pointer-events','none');\n    };\n    return {\n        init: function () {\n            var utils = new Utils();\n            var showallContainer = '<th><div id=\"showallcontainer\">';\n            showallContainer += '<a id=\"showall\" href=\"javascript:void(0)\">' +\n                '<i class=\"icon fa fa-plus fa-fw \" id=\"showalltoggle\"></i></a>';\n            showallContainer += '</div></th>';\n            $('th.timesubmitted').after(showallContainer);\n            var showallPlaceholder = '<td></td>';\n            $('td.timesubmitted').after(showallPlaceholder);\n\n\n            /*\n            The additional div and position: absolute is necessary so the tag is not becoming\n            part of the flow of the example column thus making it bigger than the others\n             */\n            var hideallContainer = '<div id=\"hideallcontainer\" style=\"position: absolute\">';\n            hideallContainer += '<span id=\"hidealllabel\" style=\"margin-right: 5px\"></span>';\n            hideallContainer += '<a id=\"hideall\" href=\"javascript:void(0);\">';\n            hideallContainer += '<i class=\"icon fa fa-minus fa-fw \" id=\"hidealltoggle\"></i></a>';\n            hideallContainer += '</div><div>&nbsp;</div>';\n            $('th.colexample:eq(0)').prepend(hideallContainer);\n\n            var showallColgroup = '<colgroup class=\"showall\" span=\"1\"><col></colgroup>';\n            $('colgroup.timesubmitted').after(showallColgroup);\n\n            var strings = [ {\n                    key: 'showalltoggle',\n                    component: 'checkmark'\n                },{\n                    key: 'hidealltoggle',\n                    component: 'checkmark'\n                },{\n                    key: 'strexamples',\n                    component: 'checkmark'\n                }\n            ];\n\n            str.get_strings(strings).then(function (results) {\n                $('#showall').prop('aria-label', results[0]).prop('title', results[0]);\n                $('#hideall').prop('aria-label', results[1]).prop('title', results[1]);\n                $('#hidealllabel').text(results[2]);\n            });\n\n            if ($(\"th.colexample\").length > 0 && !utils.allExamplesCollapsed()) {\n                $('#hideallcontainer').show();\n                $('#showallcontainer').hide();\n            } else {\n                $('#hideallcontainer').hide();\n                $(\".colexample\").hide();\n                $('#showallcontainer').show();\n                $('colgroup.examples').hide();\n            }\n\n            $(document).ready(function () {\n                $('#hideall').click(function () {\n                    utils.toggleExamples(false);\n                });\n                $('#showall').click(function () {\n                    utils.toggleExamples(true);\n                });\n                utils.clearPointerEventsFromIcons();\n            }\n\n            );\n            baseurl = utils.getBaseUrl();\n        }\n    };\n});\n"],"file":"utils.min.js"}