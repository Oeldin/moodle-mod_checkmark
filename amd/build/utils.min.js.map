{"version":3,"sources":["../src/utils.js"],"names":["define","$","str","Utils","baseurl","M","cfg","wwwroot","prototype","toggleExamples","show","getForAllExamples","key","allexamples","getExampleSelectors","ajax","url","data","hide","columns","statusCode","window","location","href","replace","each","classes","attr","classes_arr","split","forEach","value","startsWith","push","allExamplesCollapsed","length","getBaseUrl","clearPointerEventsFromIcons","css","init","utils","showallContainer","after","hideallContainer","prepend","get_strings","component","then","results","prop","text","document","ready","click"],"mappings":"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","sourcesContent":["define(['jquery', 'core/str'], function ($, str) {\r\n\r\n    var Utils = function () {\r\n        this.baseurl = M.cfg.wwwroot + \"/mod/checkmark/handlehideall.php\";\r\n    };\r\n    var baseurl;\r\n\r\n    Utils.prototype.toggleExamples = function (show) {\r\n        if (show) {\r\n            this.getForAllExamples('false');\r\n        } else {\r\n            this.getForAllExamples('true');\r\n        }\r\n    };\r\n\r\n    Utils.prototype.getForAllExamples = function (key) {\r\n        var allexamples = this.getExampleSelectors();\r\n        $.ajax({\r\n            url: baseurl,\r\n            data: {\r\n                hide: key,\r\n                columns: allexamples\r\n            },\r\n            statusCode: {\r\n                200: function () {\r\n                    var url = window.location.href;\r\n                    url = url.replace(/thide=[a-z0-9]+/, '') /* Removes thide=....3242 !*/\r\n                             .replace(/tshow=[a-z0-9]+/, '') /* Removes tshow=....3432 ! */\r\n                             .replace(/\\?&/, '?') /* Removes accidentally left ?&.. */\r\n                             .replace(/&&/, '&') /* Removes accidentally left &&.. */\r\n                             .replace(/&$/, ''); /* Removes trailing &.. */\r\n                    window.location.replace(url);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    Utils.prototype.getExampleSelectors = function () {\r\n        var allexamples = [];\r\n\r\n        $(\"th.colexample\").each(function () {\r\n\r\n            var classes = $(this).attr(\"class\");\r\n            var classes_arr = classes.split(\" \");\r\n            classes_arr.forEach(function (value) {\r\n                if (value.startsWith(\"example\")) {\r\n                    allexamples.push(value);\r\n                }\r\n            });\r\n        });\r\n        return allexamples;\r\n    };\r\n    Utils.prototype.allExamplesCollapsed = function () {\r\n        return $('th.colexample > .commands').length === 0;\r\n    };\r\n    Utils.prototype.getBaseUrl = function () {\r\n        return this.baseurl;\r\n    };\r\n    Utils.prototype.clearPointerEventsFromIcons = function () {\r\n        $('.fa-minus,.fa-plus').css('pointer-events','none');\r\n    };\r\n    return {\r\n        init: function () {\r\n            var utils = new Utils();\r\n            var showallContainer = '<th><div id=\"showallcontainer\">';\r\n            showallContainer += '<a id=\"showall\" href=\"javascript:void(0)\">' +\r\n                '<i class=\"icon fa fa-plus fa-fw \" id=\"showalltoggle\"></i></a>';\r\n            showallContainer += '</div></th>';\r\n            $('th.timesubmitted').after(showallContainer);\r\n            var showallPlaceholder = '<td></td>';\r\n            $('td.timesubmitted').after(showallPlaceholder);\r\n\r\n\r\n            /*\r\n            The additional div and position: absolute is necessary so the tag is not becoming\r\n            part of the flow of the example column thus making it bigger than the others\r\n             */\r\n            var hideallContainer = '<div id=\"hideallcontainer\" style=\"position: absolute\">';\r\n            hideallContainer += '<span id=\"hidealllabel\" style=\"margin-right: 5px\"></span>';\r\n            hideallContainer += '<a id=\"hideall\" href=\"javascript:void(0);\">';\r\n            hideallContainer += '<i class=\"icon fa fa-minus fa-fw \" id=\"hidealltoggle\"></i></a>';\r\n            hideallContainer += '</div><div>&nbsp;</div>';\r\n            $('th.colexample:eq(0)').prepend(hideallContainer);\r\n\r\n            var showallColgroup = '<colgroup class=\"showall\" span=\"1\"><col></colgroup>';\r\n            $('colgroup.timesubmitted').after(showallColgroup);\r\n\r\n            var strings = [ {\r\n                    key: 'showalltoggle',\r\n                    component: 'checkmark'\r\n                },{\r\n                    key: 'hidealltoggle',\r\n                    component: 'checkmark'\r\n                },{\r\n                    key: 'strexamples',\r\n                    component: 'checkmark'\r\n                }\r\n            ];\r\n\r\n            str.get_strings(strings).then(function (results) {\r\n                $('#showall').prop('aria-label', results[0]).prop('title', results[0]);\r\n                $('#hideall').prop('aria-label', results[1]).prop('title', results[1]);\r\n                $('#hidealllabel').text(results[2]);\r\n            });\r\n\r\n            if ($(\"th.colexample\").length > 0 && !utils.allExamplesCollapsed()) {\r\n                $('#hideallcontainer').show();\r\n                $('#showallcontainer').hide();\r\n            } else {\r\n                $('#hideallcontainer').hide();\r\n                $(\".colexample\").hide();\r\n                $('#showallcontainer').show();\r\n                $('colgroup.examples').hide();\r\n            }\r\n\r\n            $(document).ready(function () {\r\n                $('#hideall').click(function () {\r\n                    utils.toggleExamples(false);\r\n                });\r\n                $('#showall').click(function () {\r\n                    utils.toggleExamples(true);\r\n                });\r\n                utils.clearPointerEventsFromIcons();\r\n            }\r\n\r\n            );\r\n            baseurl = utils.getBaseUrl();\r\n        }\r\n    };\r\n});\r\n"],"file":"utils.min.js"}