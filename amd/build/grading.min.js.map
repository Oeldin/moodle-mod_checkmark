{"version":3,"sources":["../src/grading.js"],"names":["define","$","str","State","name","state","Grading","originalstate","originalState","prototype","toggleOverwiteHint","event","curHint","target","id","hasClass","removeClass","addClass","calculateSum","sum","each","is","classname","attr","classes","split","forEach","value","startsWith","parseFloat","substring","setPoints","points","val","get_strings","key","component","then","results","text","resetFeedback","init","push","getAttribute","style","display","grading","document","ready","change"],"mappings":"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","sourcesContent":["define(['jquery', 'core/str'], function ($, str) {\r\n\r\n    var State = function (name,state) {\r\n        this.name = name;\r\n        this.state = state;\r\n    };\r\n\r\n    var Grading = function (originalstate) {\r\n        this.originalState = originalstate;\r\n    };\r\n\r\n    Grading.prototype.toggleOverwiteHint = function (event) {\r\n        var curHint = $('.' + event.target.id);\r\n        if(curHint.hasClass('d-none')) {\r\n            curHint.removeClass(\"d-none\");\r\n        } else {\r\n            curHint.addClass(\"d-none\");\r\n        }\r\n    };\r\n    Grading.prototype.calculateSum = function () {\r\n        var sum = 0;\r\n        $('input.examplecheck').each(function () {\r\n            if($(this).is(':checked')) {\r\n                var classname = $(this).attr('class');\r\n                var classes = classname.split(' ');\r\n                classes.forEach(function (value) {\r\n                    if (value.startsWith(\"$\")) {\r\n                        sum += parseFloat(value.substring(1));\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return sum;\r\n    };\r\n    Grading.prototype.setPoints = function (points) {\r\n        $('#id_xgrade').val(points);\r\n        var strings = [\r\n            {\r\n                key: 'strautograded',\r\n                component: 'checkmark'\r\n            },\r\n        ];\r\n        str.get_strings(strings).then(function (results) {\r\n            $('#id_feedback_editoreditable:first-child').text(results[0]);\r\n        });\r\n    };\r\n\r\n    Grading.prototype.resetFeedback = function () {\r\n        $('#id_feedback_editoreditable:first-child').text('');\r\n    };\r\n    return {\r\n        init: function () {\r\n            var originalState = [];\r\n            $('.overwritetag').each(function() {\r\n               originalState.push(new State(this.getAttribute('class'),this.style.display !== 'none'));\r\n            });\r\n            var grading = new Grading(originalState);\r\n            $(document).ready(function () {\r\n                $('input.examplecheck').change(function (event) {\r\n                    grading.toggleOverwiteHint(event);\r\n                    grading.setPoints(grading.calculateSum());\r\n                });\r\n                $('#id_xgrade').change(grading.resetFeedback);\r\n            });\r\n\r\n        }\r\n    };\r\n});"],"file":"grading.min.js"}